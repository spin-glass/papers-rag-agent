# Papers RAG Agent

<!-- CLOUDRUN_URL_START -->
ğŸš€ **Live Demo**: [https://your-cloudrun-url.run.app](https://your-cloudrun-url.run.app)
<!-- CLOUDRUN_URL_END -->

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ **è«–æ–‡å­¦ç¿’ã«ç‰¹åŒ–ã—ãŸ RAG Ã— ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå‹ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆ** ã§ã™ã€‚
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè«–æ–‡ã‚¿ã‚¤ãƒˆãƒ«ã‚„è³ªå•ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®å‡¦ç†ãŒè¡Œã‚ã‚Œã¾ã™ã€‚

## Query Planner

ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã‚’è§£æã—ã€æ¤œç´¢ã‚¯ã‚¨ãƒªã‚’ç”Ÿæˆã—ã¾ã™ï¼ˆä¾‹: HyDEï¼ã‚¯ã‚¨ãƒªæ‹¡å¼µï¼‰ã€‚

## Retrieverï¼ˆGraphRAG + ãƒ™ã‚¯ãƒˆãƒ«ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ï¼‰

* arXivã‹ã‚‰è«–æ–‡ã‚’å–å¾—ã—ã€PDFã‚’ãƒ†ã‚­ã‚¹ãƒˆåŒ– â†’ IMRaDæ§‹é€ ã”ã¨ã«ãƒãƒ£ãƒ³ã‚¯åŒ– â†’ ãƒ™ã‚¯ãƒˆãƒ«DBï¼ˆFAISSï¼‰ã«æ ¼ç´ã—ã¦æ¤œç´¢ã€‚
* åŠ ãˆã¦ã€çŸ¥è­˜ã‚°ãƒ©ãƒ•ã‚’åˆ©ç”¨ã—ãŸ **GraphRAG** ã«ã‚ˆã‚Šã€æ¦‚å¿µé–“ã®é–¢ä¿‚æ€§ã‚’æ¢ç´¢ã€‚
* LangGraphä¸Šã§ã‚¯ã‚¨ãƒªè§£æã«åŸºã¥ã **ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢ã¨Graphæ¤œç´¢ã‚’å‹•çš„ã«åˆ‡ã‚Šæ›¿ãˆï¼çµ±åˆ** ã—ã¾ã™ã€‚

## Summarizer

æ¤œç´¢çµæœã‚’ã‚‚ã¨ã« **Cornell Noteå½¢å¼ï¼ˆCue / Notes / Summaryï¼‰** ã‚’ç”Ÿæˆã—ã€ç†è§£ã‚’æ·±ã‚ã‚‹ãŸã‚ã® **3å•ã‚¯ã‚¤ã‚º** ã‚’ä½œæˆã—ã¾ã™ã€‚

## Judgeï¼ˆCorrective RAG: CRAGï¼‰

å›ç­”ã¨å¼•ç”¨ã®æ•´åˆæ€§ã‚’ãƒã‚§ãƒƒã‚¯ã—ã€ä¸è¶³ã‚„èª¤ã‚ŠãŒã‚ã‚Œã°å†æ¤œç´¢ãƒ»å†ç”Ÿæˆã‚’è¡Œã„ã¾ã™ã€‚
LangGraphã®åˆ¶å¾¡ãƒ•ãƒ­ãƒ¼ã‚’ç”¨ã„ã€**è‡ªå·±æ¤œè¨¼ã¨ä¿®æ­£ãƒ«ãƒ¼ãƒ—**ã‚’å®Ÿç¾ã—ã¾ã™ã€‚

## Multi-Agent Cooperationï¼ˆAime / TreeQuestæ€æƒ³ï¼‰

* è¤‡æ•°ã®å°‚é–€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼ˆä¾‹: é ˜åŸŸå°‚é–€ï¼æ•°ç†çš„å³å¯†æ€§ï¼å¼•ç”¨é‡è¦–ï¼‰ãŒå€™è£œå›ç­”ã‚’ç”Ÿæˆã€‚
* **æ‰¹åˆ¤ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼ˆCriticï¼‰**ãŒå„å€™è£œã‚’è©•ä¾¡ã—ã€**çµ±åˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼ˆIntegratorï¼‰**ãŒæœ€çµ‚å›ç­”ã‚’æ±ºå®šã—ã¾ã™ã€‚
* ã“ã‚Œã«ã‚ˆã‚Šã€å˜ä¸€ãƒ¢ãƒ‡ãƒ«ã®åã‚Šã‚’æŠ‘ãˆã€ã‚ˆã‚Šå¦¥å½“ãªç­”ãˆã‚’å°å‡ºã—ã¾ã™ã€‚

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### å¿…é ˆè¦ä»¶

1. **OpenAI API Key ã®è¨­å®š**
   ```bash
   export OPENAI_API_KEY="your_api_key_here"
   ```

2. **ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**
   ```bash
   uv sync
   ```

3. **ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®èµ·å‹•**
   ```bash
   uv run chainlit run src/ui/app.py -w
   ```

è©³ç´°ãªã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †ã¯ [`SETUP.md`](SETUP.md) ã‚’ã”ç¢ºèªãã ã•ã„ã€‚

---

## ç›®æ¨™

**Chainlit UI** ã‚’é€šã˜ã¦ä»¥ä¸‹ã‚’ç¢ºèªã§ãã‚‹ã“ã¨:

* è³ªå•ã«å¯¾ã—ã¦å¼•ç”¨ä»˜ãã§å›ç­”ãŒè¿”ã‚‹
* Cornell Noteå½¢å¼ã®å‡ºåŠ›ï¼ˆCue / Notes / Summaryï¼‰
* è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸ3å•ã‚¯ã‚¤ã‚º
* **Judgeã«ã‚ˆã‚‹è‡ªå·±ä¿®æ­£ãƒ«ãƒ¼ãƒ—ï¼ˆCRAGï¼‰**ã®å®Ÿè¡Œå±¥æ­´
* è¤‡æ•°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å€™è£œãƒ»æ‰¹è©•ãƒ»åˆè­°çµæœ
* æ¤œç´¢ãƒ¢ãƒ¼ãƒ‰ï¼ˆãƒ™ã‚¯ãƒˆãƒ«ï¼Graphï¼‰åˆ‡æ›¿ã®å¯è¦–åŒ–

> è©•ä¾¡ã¯å¾Œå›ã—ï¼ˆLangSmith Evalsã‚„RAGASã¯æ¬¡ãƒ•ã‚§ãƒ¼ã‚ºã§å°å…¥äºˆå®šï¼‰

---

## ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆ

```tree
papers-rag-agent/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ graphs/                # LangGraph å®šç¾©ï¼ˆCRAGãƒ«ãƒ¼ãƒ—, ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ, ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ¤œç´¢ï¼‰
â”‚   â”œâ”€â”€ agents/                # Query Planner, Summarizer, Judge, Experts, Critics, Integrator
â”‚   â”œâ”€â”€ retrieval/             # Vector / Graph Retriever å®Ÿè£… + arXivæ¤œç´¢
â”‚   â”‚   â””â”€â”€ arxiv_searcher.py
â”‚   â”œâ”€â”€ adapters/              # æ—¢å­˜ã®mock_agentãªã©ã¯ã“ã“ã¸
â”‚   â”‚   â””â”€â”€ mock_agent.py
â”‚   â”œâ”€â”€ ui/                    # Chainlit ã‚¢ãƒ—ãƒª (app, components)
â”‚   â”‚   â”œâ”€â”€ app.py
â”‚   â”‚   â””â”€â”€ components.py
â”‚   â”œâ”€â”€ utils/                 # å…±é€šå‡¦ç†ï¼ˆPDFâ†’text, chunkerãªã©ï¼‰
â”‚   â””â”€â”€ models.py              # å…±é€šãƒ¢ãƒ‡ãƒ«
â”œâ”€â”€ data/                      # ã‚µãƒ³ãƒ—ãƒ«è«–æ–‡PDF
â”œâ”€â”€ tests/                     # ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
â”œâ”€â”€ scripts/                   # è©•ä¾¡ãƒ»è£œåŠ©ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ README.md
â”œâ”€â”€ pyproject.toml
â”œâ”€â”€ chainlit.md
â””â”€â”€ uv.lock
```
